<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iframe 内嵌云帐房</title>
  <script>
    // 这里需要集成 本地系统的跨窗口通讯，动态修改 iframe的 src 链接地址···
    // 账套外 路径：https://daizhang99.yunzhangfang.com/open/dataapi/partner/home?accessToken=**&refreshToken=**&homepage=**
    // 账套内 路径：https://daizhang99.yunzhangfang.com/open/dataapi/partner/company.do?qyid=**&accessToken=**&refreshToken=**
  </script>
</head>
<body>
  测试- iframe 嵌套云帐房 代账系统， 注意 应用不可以多开
  <!-- 
    必要参数：accessToken refreshToken homepage
    两个token 才能确保登录状态正常访问 
    homepage 是为了跳转到指定路由页面
    如果只是跳转代账系统首页，则 homepage 不用传递

    注意：
    跳转账套内首页方法（帐薄内 只支持跳转到首页）
    https://daizhang99.yunzhangfang.com/open/dataapi/partner/home 替换为
    /open/dataapi/partner/company.do
    参数：accessToken refreshToken qyid  (均为必要参数)

  -->

  <!-- <iframe
   width="100%"
   height="100%"
   src="https://daizhang99.yunzhangfang.com/open/dataapi/partner/home?accessToken=&refreshToken=&homepage=/home/batchtax/over-view"
   frameborder="0">
</iframe> -->
<!-- src="https://www.baidu.com/" -->

<iframe
   width="100%"
   height="100%"  
   src="https://www.baidu.com/"
   frameborder="0" id="iframeTest">
</iframe>
<script>
  // 获取 iframe 元素，添加加载完成监听
  var iframe = document.querySelector('iframe');
  iframe.onload = function() {
    // 检查 iframe 的页面是否正常加载 或者 dns 异常 页面丢失
    console.log("iframe 加载完成,但可能异常")
    // 如果出现 chorme-error: 则代表网络或者DNS出现问题 
    // todo 了解sentry 主动上报该错误，用于分析 dns 异常时 特殊性分析
    try {
      console.log(iframe.contentDocument, iframe.contentWindow)
      if(!iframe.contentDocument){
        console.log("iframe 加载异常 没有实体内容，是浏览器内置错误提示页面")
      }
    } catch (error) {
      console.log(error)
    }
  }
</script>
</body>
</html>